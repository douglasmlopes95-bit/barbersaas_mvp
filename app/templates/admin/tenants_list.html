{% extends "base.html" %}

{% block title %}Barbearias | Admin{% endblock %}

{% block content %}

<div class="header">
    <h1>Gerenciar <span>Barbearias</span></h1>
</div>

<!-- ============================= -->
<!-- RESUMO -->
<!-- ============================= -->
<div class="cards">
    <div class="card">
        <h3>Total de Barbearias</h3>
        <p>{{ tenants|length }}</p>
    </div>
</div>


<!-- ============================= -->
<!-- FORM CRIAR BARBEARIA -->
<!-- ============================= -->
<div class="card" style="margin-bottom:30px;">
    <h3 style="margin-bottom:15px;">Criar Nova Barbearia</h3>

    <form method="POST">

        <div class="form-group">
            <label>Nome da Barbearia</label>
            <input
                type="text"
                name="nome"
                placeholder="Ex: Barbearia Central"
                required
            >
        </div>

        <div class="form-group">
            <label>Slug (URL)</label>
            <input
                type="text"
                name="slug"
                placeholder="barbearia-central"
                required
            >
        </div>

        <div class="form-group">
            <label>E-mail do Administrador</label>
            <input
                type="email"
                name="email"
                placeholder="admin@barbearia.com"
                required
            >
        </div>

        <div class="form-group">
            <label>Senha</label>
            <input
                type="password"
                name="senha"
                required
            >
        </div>

        <button class="btn btn-gold">
            Criar Barbearia
        </button>

    </form>
</div>


<!-- ============================= -->
<!-- LISTA DE BARBEARIAS -->
<!-- ============================= -->
<div class="card">
    <h3 style="margin-bottom:15px;">Barbearias Cadastradas</h3>

    {% if tenants %}
    <table class="table">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Slug</th>
                <th>Status</th>
                <th>PÃºblico</th>
                <th>Painel</th>
            </tr>
        </thead>

        <tbody>

            {% for tenant in tenants %}
            <tr>

                <td>
                    <a
                        href="{{ url_for('admin.tenant_detail', tenant_id=tenant.id) }}"
                        style="font-weight:600;"
                    >
                        {{ tenant.nome }}
                    </a>
                </td>

                <td>{{ tenant.slug }}</td>

                <td>
                    {% if tenant.ativo %}
                        <span class="badge badge-success">Ativa</span>
                    {% else %}
                        <span class="badge badge-danger">Inativa</span>
                    {% endif %}
                </td>

                <td>
                    <a
                        href="/{{ tenant.slug }}/agendar"
                        target="_blank"
                    >
                        Agendamento
                    </a>
                </td>

                <td>
                    <form method="POST"
                          action="{{ url_for('admin.access_tenant', tenant_id=tenant.id) }}">
                        <button class="btn btn-sm btn-gold">
                            Acessar Painel
                        </button>
                    </form>
                </td>

            </tr>
            {% endfor %}

        </tbody>
    </table>

    {% else %}
        <p class="muted">
            Nenhuma barbearia cadastrada ainda.
        </p>
    {% endif %}
</div>

{% endblock %}
